{
    "model_name": "Retail Analytics Data Model",
    "version": "1.0",
    "datasets": {
        "stores_data_set": {
            "description": "Store information and attributes",
            "columns": {
                "store": {
                    "type": "INTEGER",
                    "description": "Unique identifier for each store"
                },
                "type": {
                    "type": "TEXT",
                    "description": "Store classification (A, B, etc.)"
                },
                "size": {
                    "type": "INTEGER",
                    "description": "Physical size in square feet"
                }
            }
        },
        "features_data_set": {
            "type": "fact_dimension",
            "description": "Store-level features and macroeconomic indicators",
            "columns": {
                "store": {
                    "type": "INTEGER",
                    "description": "Unique identifier for each store"
                },
                "date": {
                    "type": "TEXT",
                    "description": "Date of observation in dd/mm/yyyy format",
                    "usage_note": "Date is in TEXT format. DO NOT use date functions like strftime(). Extract components using substring if required."
                },
                "temperature": {
                    "description": "Average temperature on the given date"
                },
                "fuel_price": {
                    "description": "Average fuel price on the given date"
                },
                "markdown1": {
                    "description": "Value of promotional discount type 1"
                },
                "markdown2": {
                    "description": "Value of promotional discount type 2"
                },
                "markdown3": {
                    "description": "Value of promotional discount type 3"
                },
                "markdown4": {
                    "description": "Value of promotional discount type 4"
                },
                "markdown5": {
                    "description": "Value of promotional discount type 5"
                },
                "cpi": {
                    "description": "Consumer Price Index"
                },
                "unemployment": {
                    "description": "Unemployment rate"
                },
                "isholiday": {
                    "type": "INTEGER",
                    "description": "Binary indicator (1 for holiday, 0 for non-holiday)"
                }
            },
            "date_extraction": {
                "day": "CAST(substr(date, 1, 2) AS INTEGER)",
                "month": "CAST(substr(date, 4, 2) AS INTEGER)",
                "year": "CAST(substr(date, 7, 4) AS INTEGER)",
                "quarter": "CASE WHEN CAST(substr(date, 4, 2) AS INTEGER) BETWEEN 1 AND 3 THEN 1 WHEN CAST(substr(date, 4, 2) AS INTEGER) BETWEEN 4 AND 6 THEN 2 WHEN CAST(substr(date, 4, 2) AS INTEGER) BETWEEN 7 AND 9 THEN 3 ELSE 4 END"
            }
        },
        "sales_data_set": {
            "type": "fact",
            "description": "Weekly sales data for each department in each store",
            "columns": {
                "store": {
                    "type": "INTEGER",
                    "description": "Unique identifier for each store"
                },
                "dept": {
                    "type": "INTEGER",
                    "description": "Unique identifier for each department within a store"
                },
                "date": {
                    "type": "TEXT",
                    "description": "Date of observation in dd/mm/yyyy format",
                    "usage_note": "Date is in TEXT format. DO NOT use date functions. Use same extraction methods as features_data_set if required."
                },
                "weekly_sales": {
                    "description": "Total weekly sales for the given department and store"
                },
                "isholiday": {
                    "type": "INTEGER",
                    "description": "Binary indicator (1 for holiday week, 0 for non-holiday week)"
                }
            }
        }
    },
    "key_metrics": {
        "sales": [
            {
                "name": "Total Sales",
                "calculation": "SUM(weekly_sales)"
            },
            {
                "name": "Sales per Store",
                "calculation": "SUM(weekly_sales) GROUP BY store"
            },
            {
                "name": "Sales per Department",
                "calculation": "SUM(weekly_sales) GROUP BY dept"
            },
            {
                "name": "Holiday Impact",
                "calculation": "Compare sales where isholiday=1 vs isholiday=0"
            }
        ],
        "store_performance": [
            {
                "name": "Sales per Square Foot",
                "calculation": "JOIN sales_data_set and stores_data_set, then SUM(weekly_sales)/size"
            }
        ],
        "external_factors": [
            {
                "name": "Temperature Effect",
                "calculation": "Correlation between temperature and weekly_sales"
            },
            {
                "name": "Economic Impact",
                "calculation": "Analyze sales against cpi and unemployment"
            }
        ]
    },
    "common_filters": [
        "Store Type",
        "Date Periods",
        "Holidays",
        "Department Groups",
        "Economic Conditions"
    ],
    "implementation_notes": [
        "Always extract date components using the provided substring patterns",
        "When joining tables, ensure date format matching",
        "For time series analysis, sort by extracted year, month, day components"
    ]
}